  <div class="filterboxes">
    <div class="row">
      &nbsp;
      <mat-form-field class="col-12" appearance="fill" >
        <mat-label>Search</mat-label>
        <input matInput placeholder="Search with Serial Number" [(ngModel)]="filteredString" (keyup)="onSearchTerm()">
      </mat-form-field>
    </div>
    <div class="row">
        <mat-form-field class="col" >
            <mat-label>Filter by Warehouse:</mat-label>
            <mat-select matNativeControl id="type" name="type">
              <mat-option value="INS">Warehouse of client</mat-option>
            </mat-select>
          </mat-form-field>
          &nbsp;    
          <mat-form-field class="col-auto" >
            <mat-label>State:</mat-label>
            <mat-select matNativeControl id="type" name="type"  [(ngModel)]="FilterValue" (selectionChange)="onSelectedFilter()">
              <mat-option value="PENDING">PENDING</mat-option>
              <mat-option value="OPERATIVE">OPERATIVE</mat-option>
              <mat-option value="BROKEN">BROKEN</mat-option>
              <mat-option value="MAINTENANCE">MAINTENANCE</mat-option>
              <mat-option value="LOST">LOST</mat-option>
            </mat-select>
          </mat-form-field>
          &nbsp;
          <mat-form-field class="col" >
            <mat-label>Place:</mat-label>
            <mat-select matNativeControl id="type" name="type">
              <mat-option value="INS">WAREHOUSE</mat-option>
              <mat-option value="INT">TRANSPORT</mat-option>
              <mat-option value="MAN">AGENCY</mat-option>
            </mat-select>
          </mat-form-field>
          &nbsp;
          <mat-form-field class="col" >
            <mat-label>New / Used:</mat-label>
            <mat-select matNativeControl id="type" name="type" [(ngModel)]="FilterValue" (selectionChange)="onSelectedFilter()">
              <mat-option value="0">NEW</mat-option>
              <mat-option value="1">USED</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="table">
        <router-outlet></router-outlet>
<!--  -->
<!-- FILTERS FOR SEARCHING -->

<!-- START OF TABLE -->
<!--  -->
<ng-container *ngIf="!filter">
  <table class="full-width table-stripped table-hover">
    <thead>
      <th>Resolved Warehouse Item</th>
      <th>Warehouse Item Units</th>
      <th>Minimum Stock</th>
    </thead>
    <tbody>
      <tr *ngFor="let item of categoryList; let i = index" [class.active]="i == currentIndex">
      <ng-container *ngIf="contar(item.id) != 0">
        <td (click)="setCurrentItem(item, i)" [routerLink]="['viewitemset/',item.id]" style="cursor: pointer;">
          <span class="Agency-name">
            {{item.category_name}}
          </span>
        </td>
        <td style="padding-left: 20px;"
        (click)="setCurrentItem(item, i)" [routerLink]="['viewitemset/',item.id]" style="cursor: pointer;"
        >
          <div>
            <div *ngIf="contar(item.id) >= 0">{{contar(item.id)}} Units</div>
            <span *ngIf="contar(item.id) >= 20" style="color:green; line-height: 9px; font-size: 10px;">
              <span style="font-size: 13px;" class="material-icons">done</span> Good Stock
          </span>
          <span *ngIf="contar(item.id) < 20 && contar(item.id) >= 10" style="color: darkgoldenrod; line-height: 9px; font-size: 10px;">
              <span style="font-size: 13px;" class="material-icons">info</span> Low stock
          </span>    
          <span *ngIf="contar(item.id) > 0 && contar(item.id) < 9" style="color: salmon;line-height: 9px; font-size: 10px;">
            <span style="font-size: 13px;" class="material-icons">report</span> Urgent restock
        </span>
          <span *ngIf="contar(item.id) == 0" style="color: salmon;line-height: 9px; font-size: 10px;">
              <span style="font-size: 13px;" class="material-icons">report</span> No Stock - Restock now!
          </span>
          </div>
        </td>
        <td colspan="1" style="height: 60px;">
          <div class="row" *ngIf="!showstockedit">
            <div class="col-3" style="width: 30px;">
              {{item.minimumStock}}
            </div>
            <div class="col-2">
              <button mat-mini-fab (click)="stockEdit()">
                <span>
                  <mat-icon style="font-size: 30px; vertical-align: middle;">mode_edit</mat-icon>
                </span>
              </button>
            </div>
          </div>
          <div class="row" *ngIf="showstockedit">
            <div class="col-3" style="width: 30px;">
              <input matInput type="text" name="minimumStock" [(ngModel)]="item.minimumStock" width="120">
            </div>
            <div class="col-2">
              <button mat-mini-fab (click)="stockEdit()">
                <span>
                  <mat-icon style="font-size: small; vertical-align: middle;">mode_edit</mat-icon>
                </span>
              </button>
            </div>
          </div>
        </td>
      </ng-container>
      </tr>
    </tbody>
  </table>
</ng-container>


<ng-container *ngIf="filter">
  <table class="full-width table-stripped table-hover">
    <thead>
      <th>Resolved Warehouse Item</th>
      <th>Item Status</th>
      <th>Warehouse Item Units</th>
    </thead>
    <tbody>
      <tr
      *ngFor="let dataItem of filteredResult; let i = index"
        [class.active]="i == currentIndex"
        (click)="setCurrentIndividualItem(dataItem, i)"
        [routerLink]="['viewitemset'+dataItem.categoryId+'edit-item/', dataItem.id]"
        style="cursor: pointer;"
        >
        <td>
          <span class="customer-name">
            {{dataItem.name}}
          </span><br>
          <span class="customer-name">
              Serial: {{dataItem.serial}}
          </span>
        </td>
        <td>
            <span>
                  Item Status: {{dataItem.status}} - 
                  <span *ngIf="dataItem.used == 0">
                      New
                  </span>
                  <span *ngIf="dataItem.used == 1">
                      Used
                  </span>
            </span><br>
            <span>
              <ng-container *ngIf="dataItem.location == 'AGENCY'">
                <ng-container *ngIf="dataItem.warehouseId != 0">
                    <span class="material-icons" style="vertical-align: middle;">store</span> {{dataItem.warehouseId}}
                </ng-container>
              </ng-container>
              <ng-container *ngIf="dataItem.location =='WAREHOUSE'">
                <ng-container *ngIf="dataItem.warehouseId != 0">
                  <span class="material-icons" style="vertical-align: middle;">home_work</span> {{dataItem.warehouseId}}
                </ng-container>
              </ng-container>
              
                <ng-container *ngIf="dataItem.isMoving == 1">
                    <span class="material-icons" style="vertical-align: middle;">local_shipping</span> {{dataItem.assignedTechId}}
                </ng-container>
            </span>
        </td>
        <td>
              1
        </td>
      </tr>
    </tbody>
  </table>
</ng-container>


<!-- ORIGINAL TABLE SCHEME
<table class="full-width table-stripped table-hover">
  <thead>
    <th>Resolved Warehouse Item</th>
    <th>Item Status</th>
    <th>Warehouse Item Units</th>
  </thead>
  <tbody>
    <tr *ngFor="let item of TheGeneralList">
      <td>
        <span class="Agency-name">
          {{item.name}}
        </span><br>
        <span class="customer-name">
            Item Serial Number
        </span>
      </td>
      <td>
          <span>
                Item Status - New or Used
          </span><br>
          <span>
              <span class="material-icons" style="vertical-align: middle;">store</span> / <span class="material-icons" style="vertical-align: middle;">local_shipping</span> Location
          </span>
      </td>
      <td>
            1
      </td>
    </tr>
  </tbody>
</table>


-->

</div>
<div>
    <span style="display: none;">END OF WAREHOUSE LIST</span>&nbsp;
</div>
          
          <!-- BOTONES DE AGREGAR -->
          
          <div style="position: fixed; right: 40px; bottom: 30px;">
            <!-- <div style="padding-bottom: 20px;">
              <button mat-fab
              #tooltip="matTooltip"
              matTooltip="Create Warehouse"
              ></button>
              <div style="display: none;">
                <a target="_blank" href="https://icons8.com/icons/set/xls-import">Xls Import icon</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a>
              </div>
            </div> -->
            <div>
              <button mat-fab routerLink="/create-item"
              #tooltip="matTooltip"
              matTooltip="Add New Item to Warehouse"
              ><mat-icon>add</mat-icon></button>
            </div>
          </div>